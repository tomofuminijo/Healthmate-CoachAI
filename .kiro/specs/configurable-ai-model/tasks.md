# 実装計画: 設定可能なAIモデル

## 概要

環境変数 `HEALTHMATE_AI_MODEL` からモデル識別子を読み取るように、エージェント初期化コードを修正します。

## タスク

- [x] 1. エージェント初期化を環境変数からモデルを読み取るように修正
  - `healthmate_coach_ai/agent.py` の `_create_health_coach_agent_with_memory` 関数を更新
  - 環境変数読み取りを追加: `model_id = os.environ.get('HEALTHMATE_AI_MODEL')`
  - バリデーションを追加: 環境変数が未設定の場合は例外を発生
  - ハードコードされたモデル文字列を `model_id` 変数に置き換え
  - _要件: 1.1, 1.2, 1.3_

- [ ]* 1.1 環境変数使用のプロパティテストを作成
  - **プロパティ1: 環境変数読み取り**
  - **検証対象: 要件 1.1**

- [ ]* 1.2 環境変数未設定時のプロパティテストを作成
  - **プロパティ2: 設定不備時のエラー**
  - **検証対象: 要件 1.2**

- [x] 2. デプロイ設定を更新
  - [x] 2.1 .bedrock_agentcore.yaml に HEALTHMATE_AI_MODEL 環境変数を追加
    - 現在のモデルをデフォルト値に設定: "global.anthropic.claude-sonnet-4-5-20250929-v1:0"
    - _要件: 1.1_

  - [x] 2.2 README.md に環境変数のドキュメントを追加
    - HEALTHMATE_AI_MODEL 変数を文書化
    - 使用例を提供
    - _要件: 1.1_

- [x] 3. チェックポイント - 全てのテストが通ることを確認
  - 全てのテストが通ることを確認し、質問があればユーザーに確認する

## 注意事項

- `*` マークのタスクはオプションで、高速なMVPのためにスキップ可能
- 各タスクは追跡可能性のため特定の要件を参照
- 実装は最小限でコア要件に集中